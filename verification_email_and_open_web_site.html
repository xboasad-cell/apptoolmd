<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Domain & Email Link Generator</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #4361ee;
      --primary-dark: #3a56d4;
      --secondary-color: #7209b7;
      --secondary-dark: #5a0a95;
      --accent-color: #4cc9f0;
      --light-bg: #f8f9fa;
      --card-bg: #ffffff;
      --border-color: #e2e8f0;
      --text-color: #2d3748;
      --text-light: #718096;
      --success-color: #10b981;
      --success-dark: #0d9c6a;
      --danger-color: #ef4444;
      --danger-dark: #dc2626;
      --warning-color: #f59e0b;
      --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --shadow-light: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
      --radius: 12px;
      --transition: all 0.3s ease;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Inter', 'Segoe UI', 'Roboto', sans-serif;
      line-height: 1.6;
      color: var(--text-color);
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      padding: 20px;
      min-height: 100vh;
    }

    .container {
      margin: 10 auto;
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
      border: 1px solid var(--border-color);
    }

    header {
     background: linear-gradient(359deg, #b5d3f5 0%, #ff8a8a 100%);
      color: white;
      padding: 25px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .logo i {
      font-size: 1.8rem;
    }

    .logo h1 {
      font-size: 1.8rem;
      font-weight: 700;
    }

    .button-group {
      display: flex;
      gap: 12px;
    }

    .btn {
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 8px;
      font-family: inherit;
      font-size: 0.95rem;
      box-shadow: var(--shadow-light);
    }

    .btn:active {
      transform: translateY(1px);
    }

    .btn-copy {
    background: #ffffff;
    color: #000000;
    border: #ff3800 2px solid;
    }

    .btn-copy:hover {
   border: #0ecad1 2px solid;
      box-shadow: 0 4px 8px rgba(16, 185, 129, 0.3);
    }

    .btn-clear {
      background: var(--danger-color);
      color: white;
    }

    .btn-clear:hover {
      background: var(--danger-dark);
      box-shadow: 0 4px 8px rgba(239, 68, 68, 0.3);
    }

    .btn-icon {
      background: rgba(255, 255, 255, 0.15);
      color: white;
      width: 46px;
      height: 46px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .btn-icon:hover {
      background: rgba(255, 255, 255, 0.25);
    }

    .btn-save {
      background: var(--accent-color);
      color: white;
    }

    .btn-save:hover {
      background: #3ab3d9;
      box-shadow: 0 4px 8px rgba(76, 201, 240, 0.3);
    }

    .content {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 0;
      min-height: 650px;
    }

    .panel {
      padding: 25px;
      border-right: 1px solid var(--border-color);
      display: flex;
      flex-direction: column;
      background: var(--card-bg);
    }

    .panel:last-child {
      border-right: none;
    }

    .panel h2 {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
      font-size: 1.3rem;
      font-weight: 600;
      color: #ff0000;
   
      border-bottom: 1px solid var(--border-color);
    }

    .panel h3 {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 15px;
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-color);
    }

    /* Radio Button Group with Process Button */
    .radio-group {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding: 15px;
      background: var(--light-bg);
      border-radius: 8px;
      border: 1px solid var(--border-color);
    }

    .radio-options {
      display: flex;
      gap: 20px;
    }

    .radio-option {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }

    .radio-option input[type="radio"] {
      display: none;
    }

    .radio-custom {
      width: 20px;
      height: 20px;
      border: 2px solid var(--primary-color);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }

    .radio-custom::after {
      content: '';
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--primary-color);
      opacity: 0;
      transition: var(--transition);
    }

    .radio-option input[type="radio"]:checked + .radio-custom::after {
      opacity: 1;
    }

    .radio-option input[type="radio"]:checked + .radio-custom {
      border-color: var(--primary-color);
    }

    .radio-label {
      font-weight: 500;
      color: var(--text-color);
    }

    /* Process Button in Radio Group */
    .process-btn {
         padding: 12px 21px;
    align-items: center;
    background: #fff;
    border-radius: 8px;
	background: #ffffff;
    color: #000000;
    border: #ff3800 2px solid;
	cursor: pointer;
       
    }

    .process-btn:hover {
      box-shadow: 0 4px 8px rgba(67, 97, 238, 0.3);
	    border: #67e7da 2px solid;
    }

    /* Input Fields */
    .input-field {
      display: none;
      transition: var(--transition);
    }

    .input-field.active {
      display: block;
    }

    textarea {
      width: 100%;
      min-height: 500px;
      padding: 14px;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
      resize: vertical;
      margin-bottom: 20px;
      font-size: 0.9rem;
      transition: var(--transition);
      background: var(--light-bg);
    }

    textarea:focus {
      outline: none;
      border-color: var(--accent-color);
      box-shadow: 0 0 0 3px rgba(76, 201, 240, 0.1);
    }

    /* Filter Checkbox Container - INLINE */
    .filter-checkboxes-container {
      display: flex;
      gap: 20px;
      margin-bottom: 15px;
      padding: 15px;
      background: var(--light-bg);
      border-radius: 8px;
      border: 1px solid var(--border-color);
      flex-wrap: wrap;
    }

    .filter-checkbox-item {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      flex: 1;
      min-width: 200px;
    }

    .filter-checkbox {
      width: 18px;
      height: 18px;
      cursor: pointer;
    }

    .filter-checkbox-label {
      font-weight: 500;
      color: var(--text-color);
      cursor: pointer;
      font-size: 0.9rem;
    }

    .filter-checkbox-info {
      font-size: 0.8rem;
      color: var(--text-light);
      margin-bottom: 15px;
      text-align: center;
    }

    .keywords-panel {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 90%;
      max-width: 800px;
      max-height: 80vh;
      overflow-y: auto;
      z-index: 1000;
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      padding: 25px;
      display: none;
    }

    .keywords-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      border-bottom: 1px solid var(--border-color);
    }

    .keywords-tab {
      padding: 10px 20px;
      background: var(--light-bg);
      border: none;
      border-radius: 8px 8px 0 0;
      cursor: pointer;
      font-weight: 500;
      transition: var(--transition);
    }

    .keywords-tab.active {
      background: var(--primary-color);
      color: white;
    }

    .keywords-content {
      display: none;
    }

    .keywords-content.active {
      display: block;
    }

    .keywords-input {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-bottom: 20px;
    }

    .keywords-input textarea {
      min-height: 120px;
      margin-bottom: 0;
    }

    .keywords-list {
      background: var(--light-bg);
      border-radius: 8px;
      padding: 20px;
      margin-top: 15px;
      border: 1px solid var(--border-color);
    }

    .keywords-list h4 {
      color: var(--text-color);
      margin-bottom: 15px;
      font-size: 1.1rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .keyword-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .keyword-tag {
      background: var(--primary-color);
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.85rem;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: var(--shadow-light);
    }

    .domain-tag {
      background: var(--danger-color);
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.85rem;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: var(--shadow-light);
    }

    .keyword-tag .remove-tag,
    .domain-tag .remove-tag {
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      font-size: 0.8rem;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      transition: background 0.3s;
    }

    .keyword-tag .remove-tag:hover,
    .domain-tag .remove-tag:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .btn-close {
      background: var(--danger-color);
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.85rem;
      display: flex;
      align-items: center;
      gap: 6px;
      margin-left: auto;
      transition: var(--transition);
    }

    .btn-close:hover {
      background: var(--danger-dark);
    }

    /* Updated Stats Header with Copy Button on the Right */
    .stats-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .stats-title {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .stats-actions {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .stats-badge {
      background: var(--light-bg);
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 0.85rem;
      border: 1px solid var(--border-color);
      color: var(--text-light);
    }

    .stats-value {
      font-weight: 600;
      color: var(--primary-color);
    }

    .filter-container {
      margin-bottom: 20px;
      padding: 18px;
      background: var(--light-bg);
      border-radius: 8px;
      border: 1px solid var(--border-color);
    }

    .filter-label {
      display: block;
      margin-bottom: 10px;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 8px;
      color: var(--text-color);
    }

    .filter-input {
      width: 100%;
      padding: 10px 14px;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      font-family: inherit;
      margin-bottom: 8px;
      transition: var(--transition);
      background: var(--card-bg);
    }

    .filter-input:focus {
      outline: none;
      border-color: var(--accent-color);
      box-shadow: 0 0 0 2px rgba(76, 201, 240, 0.1);
    }

    .filter-info {
      font-size: 0.8rem;
      color: var(--text-light);
    }

    #linksArea, #emailsArea {
      flex: 1;
      overflow-y: auto;
      background: var(--light-bg);
      border-radius: 8px;
      padding: 8px;
    }

    .link-item, .email-item {
      padding: 14px 16px;
      margin-bottom: 10px;
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      display: flex;
      align-items: center;
      gap: 14px;
      transition: var(--transition);
      box-shadow: var(--shadow-light);
    }

    .link-item:hover, .email-item:hover {
      background: var(--light-bg);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .link-text, .email-text {
      flex: 1;
      word-break: break-all;
      font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
      font-size: 0.9rem;
      color: var(--text-color);
    }

    .open-link-btn {
      background: var(--success-color);
      color: white;
      border: none;
      padding: 8px 14px;
      border-radius: 6px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.85rem;
      font-weight: 500;
      transition: var(--transition);
      white-space: nowrap;
      flex-shrink: 0;
    }

    .open-link-btn:hover {
      background: var(--success-dark);
      transform: translateY(-1px);
      box-shadow: 0 2px 6px rgba(16, 185, 129, 0.3);
    }

    .open-link-btn i {
      font-size: 0.8rem;
    }

    .copy-btn {
      background: var(--accent-color);
      color: white;
      border: none;
      width: 32px;
      height: 32px;
      border-radius: 6px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      transition: var(--transition);
      font-size: 0.85rem;
    }

    .copy-btn:hover {
      background: #3ab3d9;
      transform: scale(1.05);
    }

    .website-btn {
      background: var(--primary-color);
      color: white;
      border: none;
      padding: 8px 14px;
      border-radius: 6px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.85rem;
      font-weight: 500;
      transition: var(--transition);
      white-space: nowrap;
      flex-shrink: 0;
    }

    .website-btn:hover {
      background: var(--primary-dark);
      transform: translateY(-1px);
      box-shadow: 0 2px 6px rgba(67, 97, 238, 0.3);
    }

    .website-btn i {
      font-size: 0.8rem;
    }

    .empty-state {
      text-align: center;
      padding: 50px 20px;
      color: var(--text-light);
      width: 100%;
    }

    .empty-state i {
      font-size: 2.5rem;
      margin-bottom: 15px;
      opacity: 0.5;
    }

    .empty-state p {
      font-size: 0.95rem;
    }

    .notification {
      position: fixed;
      bottom: 25px;
      right: 25px;
      background: var(--success-color);
      color: white;
      padding: 14px 20px;
      border-radius: 8px;
      box-shadow: var(--shadow);
      display: none;
      align-items: center;
      gap: 10px;
      z-index: 1000;
      animation: slideIn 0.3s ease;
    }

    .notification.error {
      background: var(--danger-color);
    }

    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 999;
      display: none;
    }

    /* Domain Extension Buttons */
    .domain-extensions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }

    .domain-extension-btn {
      background: var(--light-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .domain-extension-btn:hover {
      background: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }

    .domain-extension-btn.active {
      background: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }

    .domain-extension-btn.all-btn {
      background: var(--success-color);
      color: white;
      border-color: var(--success-color);
    }

    .domain-extension-btn.all-btn.active {
      background: var(--success-dark);
      border-color: var(--success-dark);
    }

    .extension-count {
      background: rgba(255, 255, 255, 0.3);
      border-radius: 10px;
      padding: 2px 6px;
      font-size: 0.7rem;
      font-weight: 600;
    }

    /* Email Stats Section */
    .email-stats {
      display: flex;
      gap: 15px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }

    .stat-item {
      display: flex;
      flex-direction: column;
      background: var(--light-bg);
      padding: 12px 16px;
      border-radius: 8px;
      border: 1px solid var(--border-color);
      min-width: 120px;
    }

    .stat-label {
      font-size: 0.8rem;
      color: var(--text-light);
      margin-bottom: 4px;
    }

    .stat-value {
      font-size: 1.2rem;
      font-weight: 700;
          color: #ff0000;
    }

    @media (max-width: 1024px) {
      .content {
        grid-template-columns: 1fr;
      }
      
      .panel {
        border-right: none;
        border-bottom: 1px solid var(--border-color);
      }
      
      .panel:last-child {
        border-bottom: none;
      }
    }

    @media (max-width: 768px) {
      body {
        padding: 10px;
      }
      
      header {
        flex-direction: column;
        gap: 15px;
        align-items: flex-start;
        padding: 20px;
      }
      
      .button-group {
        width: 100%;
        justify-content: space-between;
        flex-wrap: wrap;
      }
      
      .radio-group {
        flex-direction: column;
        gap: 15px;
        align-items: flex-start;
      }
      
      .filter-checkboxes-container {
        flex-direction: column;
        gap: 15px;
      }
      
      .filter-checkbox-item {
        min-width: 100%;
      }
      
      .keywords-input {
        flex-direction: column;
      }
      
      .panel {
        padding: 20px;
      }
      
      .btn {
        padding: 10px 16px;
        font-size: 0.9rem;
      }
      
      .link-item, .email-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      
      .open-link-btn, .website-btn {
        align-self: flex-start;
      }
      
      .stats-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      
      .stats-actions {
        align-self: flex-end;
      }
      
      .email-stats {
        flex-direction: column;
        gap: 10px;
      }
      
      .stat-item {
        min-width: 100%;
      }
      
      .keywords-tabs {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <i class="fas fa-link"></i>
        <h1>Domain & Email Generator</h1>
      </div>
      <div class="button-group">
        
        <button class="btn btn-icon" onclick="toggleKeywordsPanel()" title="Toggle Keywords Panel">
          <i class="fas fa-cog"></i>
        </button>
      </div>
    </header>

    <div class="content">
      <!-- Input Panel -->
      <div class="panel">
        <h2><i class="fas fa-keyboard"></i> Input</h2>
        
        <!-- Radio Button Group with Process Button -->
        <div class="radio-group">
          <div class="radio-options">
            <label class="radio-option">
              <input type="radio" name="inputType" value="domains" checked onchange="toggleInputField()">
              <span class="radio-custom"></span>
              <span class="radio-label">Domains</span>
            </label>
            <label class="radio-option">
              <input type="radio" name="inputType" value="emails" onchange="toggleInputField()">
              <span class="radio-custom"></span>
              <span class="radio-label">Emails</span>
            </label>
          </div>
          <button class="process-btn" onclick="processInput()">
            <i class="fas fa-sync-alt"></i> Process
          </button>
        </div>
        
        <!-- Domain Input Field -->
        <div id="domainInputField" class="input-field active">
          <h3><i class="fas fa-globe"></i> Domains</h3>
          <textarea id="domainInput" placeholder="Enter domains separated by commas or new lines"></textarea>
        </div>
        
        <!-- Email Input Field -->
        <div id="emailInputField" class="input-field">
          <h3><i class="fas fa-envelope"></i> Emails</h3>
          
          <!-- INLINE Filter Checkboxes -->
          <div class="filter-checkboxes-container">
            <!-- Filter Checkbox for Keywords -->
            <label class="filter-checkbox-item">
              <input type="checkbox" id="filterKeywordsCheckbox" class="filter-checkbox" onchange="toggleKeywordFilter()">
              <span class="filter-checkbox-label">
                <i class="fas fa-filter"></i> Filter using keywords
              </span>
            </label>
            
            <!-- Remove Checkbox for Domains -->
            <label class="filter-checkbox-item">
              <input type="checkbox" id="removeDomainsCheckbox" class="filter-checkbox" onchange="toggleDomainRemoval()">
              <span class="filter-checkbox-label">
                <i class="fas fa-ban"></i> Remove saved domains
              </span>
            </label>
          </div>
          
         
          
          <textarea id="emailInput" placeholder="Enter emails separated by commas or new lines"></textarea>
        </div>
      </div>

      <!-- Domain Links Output -->
      <div class="panel">
        <div class="stats-header">
          <div class="stats-title">
            <h2><i class="fas fa-external-link-alt"></i> Domain Links</h2>
          </div>
          <div class="stats-actions">
            <div class="stats-badge" id="websiteStatsContainer" style="display: none;">
              Opened: <span class="stats-value" id="websiteStats">0/0</span>
            </div>
          </div>
        </div>
        <div id="linksArea">
          <div class="empty-state">
            <i class="fas fa-link"></i>
            <p>Domain links will appear here</p>
          </div>
        </div>
      </div>

      <!-- Email Links Output -->
      <div class="panel">
        <div class="stats-header">
          <div class="stats-title">
            <h2><i class="fas fa-inbox"></i> Filtered Emails</h2>
          </div>
          <div class="stats-actions">
            <button class="btn btn-copy" onclick="copyAllEmails()">
              <i class="fas fa-copy"></i> Copy Emails
            </button>
          </div>
        </div>
        
        <!-- Email Statistics -->
        <div class="email-stats">
          <div class="stat-item">
            <div class="stat-label">Total Emails</div>
            <div class="stat-value" id="totalEmailCount">0</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Currently Displayed</div>
            <div class="stat-value" id="displayedEmailCount">0</div>
          </div>
        </div>
        
        <!-- Domain Extension Filter -->
        <div class="filter-container">
          <label class="filter-label" for="domainFilter">
            <i class="fas fa-filter"></i> Filter by Domain Extension
          </label>
          <div class="domain-extensions" id="domainExtensions">
            <!-- Domain extension buttons will appear here -->
          </div>
          <div class="filter-info">
            Click on a domain extension to filter emails
          </div>
        </div>
        
        <div id="emailsArea">
          <div class="empty-state">
            <i class="fas fa-envelope"></i>
            <p>Emails will appear here</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Keywords Panel -->
  <div id="keywordsPanel" class="keywords-panel">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
      <h3>
        <i class="fas fa-filter"></i> Email Filters
      </h3>
      <div style="display: flex; gap: 10px;">
        <button class="btn-close" onclick="hideKeywordsPanel()">
          <i class="fas fa-times"></i> Close
        </button>
      </div>
    </div>
    
    <!-- Tabs for Keywords and Domains -->
    <div class="keywords-tabs">
      <button class="keywords-tab active" onclick="switchTab('keywords')">
        <i class="fas fa-key"></i> Keywords
      </button>
      <button class="keywords-tab" onclick="switchTab('domains')">
        <i class="fas fa-ban"></i> Domains to Remove
      </button>
    </div>
    
    <!-- Keywords Tab Content -->
    <div id="keywordsTab" class="keywords-content active">
      <p style="margin-bottom: 15px; color: var(--text-light); font-size: 0.9rem;">
        Add custom keywords to filter emails (one per line)
      </p>
      <div class="keywords-input">
        <textarea id="keywordsInput" placeholder="support&#10;contact&#10;admissions"></textarea>
        <div style="display: flex; gap: 10px;">
          <button class="btn btn-save" onclick="saveKeywords()">
            <i class="fas fa-save"></i> Save Keywords
          </button>
          <button class="btn btn-clear" onclick="clearKeywords()">
            <i class="fas fa-trash-alt"></i> Clear All
          </button>
        </div>
      </div>
      <div class="keywords-list">
        <h4><i class="fas fa-tags"></i> Saved Keywords</h4>
        <div id="keywordsTags" class="keyword-tags">
          <!-- Keywords will be displayed here -->
        </div>
      </div>
    </div>
    
    <!-- Domains Tab Content -->
    <div id="domainsTab" class="keywords-content">
      <p style="margin-bottom: 15px; color: var(--text-light); font-size: 0.9rem;">
        Add domains to remove from email list (one per line). When "Remove saved domains" is checked, emails containing these domains will be deleted.
      </p>
      <div class="keywords-input">
        <textarea id="domainsInput" placeholder="gmail.com&#10;yahoo.com&#10;hotmail.com"></textarea>
        <div style="display: flex; gap: 10px;">
          <button class="btn btn-save" onclick="saveDomains()">
            <i class="fas fa-save"></i> Save Domains
          </button>
          <button class="btn btn-clear" onclick="clearDomains()">
            <i class="fas fa-trash-alt"></i> Clear All
          </button>
        </div>
      </div>
      <div class="keywords-list">
        <h4><i class="fas fa-ban"></i> Domains to Remove</h4>
        <div id="domainsTags" class="keyword-tags">
          <!-- Domains will be displayed here -->
        </div>
      </div>
    </div>
  </div>

  <!-- Overlay for modal -->
  <div class="overlay" id="overlay" onclick="hideKeywordsPanel()"></div>

  <div class="notification" id="notification">
    <i class="fas fa-check-circle"></i> Copied to clipboard!
  </div>

<script>
    // Initialize email keywords from localStorage or use default
    let emailKeywords = JSON.parse(localStorage.getItem('emailKeywords')) || 
      ['support', 'contact', 'admissions', 'services', 'communications', 'humanresources', 'university', 'info'];

    // Initialize domains to remove from localStorage or use default
    let domainsToRemove = JSON.parse(localStorage.getItem('domainsToRemove')) || 
      ['gmail.com', 'yahoo.com', 'hotmail.com', 'outlook.com'];

    // Store the currently displayed emails for filtering
    let currentEmails = [];
    let filteredEmails = [];
    
    // Track email statistics
    let emailStats = {
      total: 0,
      displayed: 0
    };
    
    // Track website statistics
    let websiteStats = {
      total: 0,
      opened: 0
    };

    // Currently selected domain extension
    let selectedExtension = null;

    // Track keyword filter state
    let keywordFilterEnabled = false;

    // Track domain removal state
    let domainRemovalEnabled = false;

    // Store extension counts
    let extensionCounts = {};

    // Store domain availability status
    let domainAvailability = {};

    // Function to validate domains
    function isValidDomain(domain) {
        if (!domain || domain.length < 3) return false;
        
        const domainPattern = /^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/;
        
        if (!domainPattern.test(domain)) {
            return false;
        }
        
        // Additional checks
        const parts = domain.split('.');
        const tld = parts[parts.length - 1];
        
        // Check TLD length (2-63 characters)
        if (tld.length < 2 || tld.length > 63) {
            return false;
        }
        
        // Check each label length (1-63 characters)
        for (const part of parts) {
            if (part.length < 1 || part.length > 63) {
                return false;
            }
            // Check for consecutive hyphens and hyphen at start/end
            if (part.startsWith('-') || part.endsWith('-') || part.includes('--')) {
                return false;
            }
        }
        
        return true;
    }

    // Function to check if domain has a working website
    async function checkDomainAvailability(domain) {
        if (!domain || !isValidDomain(domain)) {
            return { available: false, status: 'invalid' };
        }

        // Check cache first
        if (domainAvailability[domain]) {
            return domainAvailability[domain];
        }

        const url = `https://${domain}`;
        
        try {
            // Use a timeout to avoid long waits
            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 second timeout
            
            const response = await fetch(url, {
                method: 'HEAD',
                mode: 'no-cors',
                signal: controller.signal,
                headers: {
                    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
                }
            });
            
            clearTimeout(timeoutId);
            
            // If we get here, the domain is reachable
            domainAvailability[domain] = { available: true, status: 'active' };
            return domainAvailability[domain];
            
        } catch (error) {
            // Try with HTTP if HTTPS fails
            if (url.startsWith('https://')) {
                try {
                    const httpUrl = url.replace('https://', 'http://');
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 5000);
                    
                    const response = await fetch(httpUrl, {
                        method: 'HEAD',
                        mode: 'no-cors',
                        signal: controller.signal
                    });
                    
                    clearTimeout(timeoutId);
                    domainAvailability[domain] = { available: true, status: 'active' };
                    return domainAvailability[domain];
                    
                } catch (httpError) {
                    domainAvailability[domain] = { available: false, status: 'unreachable' };
                    return domainAvailability[domain];
                }
            }
            
            domainAvailability[domain] = { available: false, status: 'unreachable' };
            return domainAvailability[domain];
        }
    }

    // Function to extract and validate domains from text
    function extractDomainsFromText(text) {
        const domainPattern = /\b([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}\b/gi;
        const matches = text.match(domainPattern) || [];
        
        return matches.filter(domain => {
            // Clean the domain
            const cleanDomain = domain
                .replace(/^(https?:\/\/)?(www\.)?/i, '')
                .split('/')[0]
                .split(':')[0];
            
            return isValidDomain(cleanDomain);
        });
    }

    // Function to extract main domain from email (keep full domain for .edu domains)
    function extractMainDomainFromEmail(email) {
      const atIndex = email.indexOf('@');
      if (atIndex !== -1) {
        const fullDomain = email.substring(atIndex + 1);
        
        // If domain contains .edu, return the full domain as-is
        if (fullDomain.includes('.edu')) {
          return fullDomain;
        }
        
        // For non-.edu domains, remove subdomains
        const domainParts = fullDomain.split('.');
        if (domainParts.length > 2) {
          // Return the last two parts (main domain and extension)
          return domainParts.slice(-2).join('.');
        }
        
        // For regular domains with 2 parts
        return fullDomain;
      }
      return null;
    }

    // Function to toggle keyword filter
    function toggleKeywordFilter() {
      const checkbox = document.getElementById('filterKeywordsCheckbox');
      keywordFilterEnabled = checkbox.checked;
      
      // If we have emails processed, re-filter them
      if (currentEmails.length > 0) {
        filterEmailsByDomain();
      }
    }

    // Function to toggle domain removal
    function toggleDomainRemoval() {
      const checkbox = document.getElementById('removeDomainsCheckbox');
      domainRemovalEnabled = checkbox.checked;
      
      // If we have emails processed, re-filter them
      if (currentEmails.length > 0) {
        filterEmailsByDomain();
      }
    }

    // Function to toggle between domain and email input fields
    function toggleInputField() {
      const domainRadio = document.querySelector('input[name="inputType"][value="domains"]');
      const domainField = document.getElementById('domainInputField');
      const emailField = document.getElementById('emailInputField');
      
      if (domainRadio.checked) {
        domainField.classList.add('active');
        emailField.classList.remove('active');
      } else {
        domainField.classList.remove('active');
        emailField.classList.add('active');
      }
    }

    // Function to process the selected input type
    function processInput() {
      const domainRadio = document.querySelector('input[name="inputType"][value="domains"]');
      
      if (domainRadio.checked) {
        processDomains();
      } else {
        processEmails();
      }
    }

    // Function to process domains with validation and availability check
    async function processDomains() {
      const domainInput = document.getElementById('domainInput').value;
      const linksContainer = document.getElementById('linksArea');
      
      // Clear previous results
      linksContainer.innerHTML = '';
      
      // Reset website statistics
      websiteStats = {
        total: 0,
        opened: 0
      };

      // Extract and validate domains from input
      const domains = extractDomainsFromText(domainInput);

      if (domains.length === 0) {
        linksContainer.innerHTML = `
          <div class="empty-state">
            <i class="fas fa-exclamation-circle"></i>
            <p>No valid domains found</p>
          </div>
        `;
      } else {
        // Update website stats
        websiteStats.total = domains.length;
        
        // Show loading state
        linksContainer.innerHTML = `
          <div class="empty-state">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Checking domain availability...</p>
          </div>
        `;

        // Create domain links with availability check
        for (const domain of domains) {
          const cleanDomain = domain
            .replace(/^(https?:\/\/)?(www\.)?/i, '')
            .split('/')[0]
            .split(':')[0];
            
          const fullUrl = 'https://' + cleanDomain;

          // Check domain availability
          const availability = await checkDomainAvailability(cleanDomain);

          const linkItem = document.createElement('div');
          linkItem.className = 'link-item';

          const linkText = document.createElement('div');
          linkText.className = 'link-text';
          linkText.textContent = cleanDomain;
          linkText.title = `Domain: ${cleanDomain}\nStatus: ${availability.available ? 'Active website' : 'No website found'}`;

          const statusBadge = document.createElement('span');
          if (availability.available) {
            statusBadge.innerHTML = '<i class="fas fa-check-circle" style="color: var(--success-color); margin-left: 10px;"></i>';
            statusBadge.title = 'Active website';
          } else {
            statusBadge.innerHTML = '<i class="fas fa-times-circle" style="color: var(--danger-color); margin-left: 10px;"></i>';
            statusBadge.title = 'No website found';
          }

          const openBtn = document.createElement('button');
          openBtn.className = 'open-link-btn';
          openBtn.innerHTML = '<i class="fas fa-external-link-alt"></i> Open';
          openBtn.onclick = () => {
            if (availability.available) {
              window.open(fullUrl, '_blank');
              
              // Update website stats
              websiteStats.opened++;
              updateStatsDisplay();
              
              // Change the link text color to red
              linkText.style.color = '#ff0000';
            } else {
              showNotification('Website not available for this domain', true);
            }
          };

          // Disable button if website is not available
          if (!availability.available) {
            openBtn.disabled = true;
            openBtn.style.opacity = '0.6';
            openBtn.style.cursor = 'not-allowed';
          }

          linkItem.appendChild(linkText);
          linkItem.appendChild(statusBadge);
          linkItem.appendChild(openBtn);
          
          // If this is the first item, clear the loading state
          if (linksContainer.querySelector('.empty-state')) {
            linksContainer.innerHTML = '';
          }
          
          linksContainer.appendChild(linkItem);
        }
      }

      updateStatsDisplay();
    }

    // Function to process emails with domain validation and availability check
    async function processEmails() {
      const emailInput = document.getElementById('emailInput').value;
      const emailsContainer = document.getElementById('emailsArea');
      
      // Clear previous results
      emailsContainer.innerHTML = '';

      // Extract emails from input
      const emails = emailInput
        .split(/[\n,]+/)
        .map(e => e.trim())
        .filter(e => e.length > 0 && e.includes('@'));

      // Update email statistics
      emailStats.total = emails.length;
      emailStats.displayed = 0;

      // Show loading state
      emailsContainer.innerHTML = `
        <div class="empty-state">
          <i class="fas fa-spinner fa-spin"></i>
          <p>Checking email domains...</p>
        </div>
      `;

      // Store all emails for filtering with availability status
      currentEmails = [];
      for (const email of emails) {
        const domain = extractDomainFromEmail(email);
        const isValid = domain ? isValidDomain(domain) : false;
        let isAvailable = false;
        
        if (isValid && domain) {
          const availability = await checkDomainAvailability(domain);
          isAvailable = availability.available;
        }
        
        currentEmails.push({email, domain, isValid, isAvailable, type: 'email'});
      }
      
      filteredEmails = [...currentEmails];
      emailStats.displayed = filteredEmails.length;

      // Update statistics display
      updateEmailStatsDisplay();

      if (emails.length === 0) {
        emailsContainer.innerHTML = `
          <div class="empty-state">
            <i class="fas fa-envelope"></i>
            <p>No valid emails entered</p>
          </div>
        `;
        return;
      }

      // Extract and display domain extensions
      extractDomainExtensions();
      
      // Apply any existing domain filter
      filterEmailsByDomain();
    }

    // Update keywords and domains display on load
    document.addEventListener('DOMContentLoaded', function() {
      updateKeywordsDisplay();
      updateDomainsDisplay();
      
      // Add event listener for Escape key
      document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
          hideKeywordsPanel();
        }
      });
    });

    // Function to update statistics display
    function updateStatsDisplay() {
      const websiteStatsContainer = document.getElementById('websiteStatsContainer');
      
      // Update website stats
      document.getElementById('websiteStats').textContent = `${websiteStats.opened}/${websiteStats.total}`;
      
      // Show/hide website stats container
      if (websiteStats.total > 0) {
        websiteStatsContainer.style.display = 'flex';
      } else {
        websiteStatsContainer.style.display = 'none';
      }
    }

    // Function to update email statistics display
    function updateEmailStatsDisplay() {
      document.getElementById('totalEmailCount').textContent = emailStats.total;
      document.getElementById('displayedEmailCount').textContent = emailStats.displayed;
    }

    // Function to extract FULL domain from email (everything after @)
    function extractDomainFromEmail(email) {
      const atIndex = email.indexOf('@');
      if (atIndex !== -1) {
        const domain = email.substring(atIndex + 1);
        return domain.toLowerCase();
      }
      return null;
    }

    // Function to check if email contains any saved keywords
    function emailContainsKeywords(email) {
      if (!keywordFilterEnabled || emailKeywords.length === 0) {
        return true;
      }
      
      const emailLower = email.toLowerCase();
      return emailKeywords.some(keyword => 
        emailLower.includes(keyword.toLowerCase())
      );
    }

    // Function to check if email has a domain that should be removed
    function emailHasDomainToRemove(email) {
      if (!domainRemovalEnabled || domainsToRemove.length === 0) {
        return false; // Don't remove if filter is disabled or no domains to remove
      }
      
      const domain = extractDomainFromEmail(email);
      if (!domain) return false;
      
      return domainsToRemove.some(domainToRemove => 
        domain.toLowerCase().includes(domainToRemove.toLowerCase())
      );
    }

    // Function to extract domain extensions from FILTERED emails
    function extractDomainExtensions() {
      const extensionsContainer = document.getElementById('domainExtensions');
      extensionsContainer.innerHTML = '';
      
      // Reset extension counts
      extensionCounts = {};
      
      // Get the emails to use for extension counting (after applying all filters)
      const emailsForExtensions = currentEmails.filter(item => 
        emailContainsKeywords(item.email) && !emailHasDomainToRemove(item.email)
      );
      
      // Calculate counts for each extension from the filtered emails
      emailsForExtensions.forEach(item => {
        const domain = extractDomainFromEmail(item.email);
        if (domain) {
          // Extract the extension (everything after the last dot)
          const lastDotIndex = domain.lastIndexOf('.');
          if (lastDotIndex !== -1) {
            const extension = domain.substring(lastDotIndex).toLowerCase();
            if (extension.length > 1) { // Ensure it's a valid extension
              extensionCounts[extension] = (extensionCounts[extension] || 0) + 1;
            }
          }
        }
      });
      
      // Add "All" button first
      const allButton = document.createElement('button');
      allButton.className = 'domain-extension-btn all-btn active';
      allButton.innerHTML = `All <span class="extension-count">${emailsForExtensions.length}</span>`;
      allButton.onclick = () => {
        // Deselect all other buttons
        document.querySelectorAll('.domain-extension-btn').forEach(btn => {
          btn.classList.remove('active');
        });
        
        // Select this button
        allButton.classList.add('active');
        selectedExtension = null;
        
        // Show all emails (respecting keyword and domain removal filters)
        filterEmailsByDomain();
      };
      
      extensionsContainer.appendChild(allButton);
      
      // Create buttons for each extension
      Object.keys(extensionCounts).forEach(extension => {
        const button = document.createElement('button');
        button.className = 'domain-extension-btn';
        button.innerHTML = `${extension} <span class="extension-count">${extensionCounts[extension]}</span>`;
        button.onclick = () => {
          // Deselect all other buttons
          document.querySelectorAll('.domain-extension-btn').forEach(btn => {
            btn.classList.remove('active');
          });
          
          // Select this button
          selectedExtension = extension;
          button.classList.add('active');
          
          // Apply filter
          filterEmailsByDomain();
        };
        
        extensionsContainer.appendChild(button);
      });
      
      // If no extensions found, show message
      if (Object.keys(extensionCounts).length === 0) {
        extensionsContainer.innerHTML = '<p style="color: var(--text-light); font-size: 0.9rem;">No domain extensions found</p>';
      }
    }

    // Function to filter emails by domain extension
    function filterEmailsByDomain() {
      const emailsContainer = document.getElementById('emailsArea');
      
      // Clear previous results
      emailsContainer.innerHTML = '';
      
      // Filter emails based on selected extension, keywords, and domain removal
      if (selectedExtension) {
        filteredEmails = currentEmails.filter(item => {
          const domain = extractDomainFromEmail(item.email);
          if (domain) {
            return domain.toLowerCase().endsWith(selectedExtension) && 
                   emailContainsKeywords(item.email) &&
                   !emailHasDomainToRemove(item.email);
          }
          return false;
        });
      } else {
        filteredEmails = currentEmails.filter(item => 
          emailContainsKeywords(item.email) && !emailHasDomainToRemove(item.email)
        );
      }
      
      // Update displayed count
      emailStats.displayed = filteredEmails.length;
      updateEmailStatsDisplay();
      
      if (filteredEmails.length === 0) {
        emailsContainer.innerHTML = `
          <div class="empty-state">
            <i class="fas fa-envelope"></i>
            <p>No emails match the selected filter</p>
          </div>
        `;
        return;
      }
      
      // Display all filtered emails
      filteredEmails.forEach(item => {
        const emailItem = document.createElement('div');
        emailItem.className = 'email-item';
        
        const emailText = document.createElement('div');
        emailText.className = 'email-text';
        emailText.textContent = item.email;
        
        // Add validation and availability indicators
        const statusContainer = document.createElement('div');
        statusContainer.style.display = 'flex';
        statusContainer.style.gap = '5px';
        statusContainer.style.marginLeft = '10px';
        
        if (item.isValid) {
          if (item.isAvailable) {
            const availableBadge = document.createElement('span');
            availableBadge.innerHTML = '<i class="fas fa-check-circle" style="color: var(--success-color);"></i>';
            availableBadge.title = 'Valid domain with active website';
            statusContainer.appendChild(availableBadge);
          } else {
            const unavailableBadge = document.createElement('span');
            unavailableBadge.innerHTML = '<i class="fas fa-exclamation-triangle" style="color: var(--warning-color);"></i>';
            unavailableBadge.title = 'Valid domain but no website found';
            statusContainer.appendChild(unavailableBadge);
          }
        } else {
          const invalidBadge = document.createElement('span');
          invalidBadge.innerHTML = '<i class="fas fa-times-circle" style="color: var(--danger-color);"></i>';
          invalidBadge.title = 'Invalid domain';
          statusContainer.appendChild(invalidBadge);
        }
        
        emailText.appendChild(statusContainer);
        
        // Create website button (only if domain is valid and available)
        const websiteBtn = document.createElement('button');
        websiteBtn.className = 'website-btn';
        websiteBtn.innerHTML = '<i class="fas fa-external-link-alt"></i> Website';
        websiteBtn.onclick = () => {
          if (item.isValid && item.isAvailable) {
            const domain = extractMainDomainFromEmail(item.email);
            if (domain) {
              const websiteUrl = 'https://' + domain;
              window.open(websiteUrl, '_blank');
            }
          } else if (!item.isValid) {
            showNotification('Cannot open website - invalid domain', true);
          } else {
            showNotification('Website not available for this domain', true);
          }
        };
        
        // Disable button if domain is invalid or unavailable
        if (!item.isValid || !item.isAvailable) {
          websiteBtn.disabled = true;
          websiteBtn.style.opacity = '0.6';
          websiteBtn.style.cursor = 'not-allowed';
        }
        
        // Create copy button
        const copyBtn = document.createElement('button');
        copyBtn.className = 'copy-btn';
        copyBtn.innerHTML = '<i class="fas fa-copy"></i>';
        copyBtn.onclick = () => {
          copyToClipboard(item.email);
        };
        
        emailItem.appendChild(emailText);
        emailItem.appendChild(websiteBtn);
        emailItem.appendChild(copyBtn);
        emailsContainer.appendChild(emailItem);
      });
    }

    // Function to copy all emails to clipboard
    function copyAllEmails() {
      if (filteredEmails.length === 0) {
        showNotification('No emails to copy', true);
        return;
      }
      
      const emailList = filteredEmails.map(item => item.email).join('\n');
      copyToClipboard(emailList);
      showNotification('All emails copied to clipboard!');
    }

    // Function to copy text to clipboard
    function copyToClipboard(text) {
      // Use modern clipboard API if available
      if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(text).then(() => {
          showNotification('Copied to clipboard!');
        }).catch(() => {
          // Fallback to old method
          fallbackCopyToClipboard(text);
        });
      } else {
        // Fallback to old method
        fallbackCopyToClipboard(text);
      }
    }

    // Fallback copy method
    function fallbackCopyToClipboard(text) {
      const textarea = document.createElement('textarea');
      textarea.value = text;
      textarea.style.position = 'fixed';
      textarea.style.opacity = '0';
      document.body.appendChild(textarea);
      textarea.select();
      document.execCommand('copy');
      document.body.removeChild(textarea);
      showNotification('Copied to clipboard!');
    }

    // Function to show notification
    function showNotification(message, isError = false) {
      const notification = document.getElementById('notification');
      notification.innerHTML = `<i class="fas fa-${isError ? 'exclamation-circle' : 'check-circle'}"></i> ${message}`;
      notification.className = `notification ${isError ? 'error' : ''}`;
      notification.style.display = 'flex';
      
      setTimeout(() => {
        notification.style.display = 'none';
      }, 3000);
    }

    // Keywords Panel Functions
    function toggleKeywordsPanel() {
      const panel = document.getElementById('keywordsPanel');
      const overlay = document.getElementById('overlay');
      
      if (panel.style.display === 'block') {
        hideKeywordsPanel();
      } else {
        panel.style.display = 'block';
        overlay.style.display = 'block';
      }
    }

    function hideKeywordsPanel() {
      const panel = document.getElementById('keywordsPanel');
      const overlay = document.getElementById('overlay');
      panel.style.display = 'none';
      overlay.style.display = 'none';
    }

    function switchTab(tabName) {
      // Hide all tabs
      document.querySelectorAll('.keywords-content').forEach(tab => {
        tab.classList.remove('active');
      });
      
      // Remove active class from all tab buttons
      document.querySelectorAll('.keywords-tab').forEach(button => {
        button.classList.remove('active');
      });
      
      // Show selected tab
      document.getElementById(tabName + 'Tab').classList.add('active');
      
      // Activate selected tab button
      event.target.classList.add('active');
    }

    // Keywords Functions
    function saveKeywords() {
      const keywordsInput = document.getElementById('keywordsInput').value;
      const keywords = keywordsInput
        .split('\n')
        .map(k => k.trim())
        .filter(k => k.length > 0);
      
      emailKeywords = [...new Set([...emailKeywords, ...keywords])];
      localStorage.setItem('emailKeywords', JSON.stringify(emailKeywords));
      updateKeywordsDisplay();
      showNotification('Keywords saved successfully!');
      
      // If keyword filter is enabled, re-filter emails
      if (keywordFilterEnabled && currentEmails.length > 0) {
        filterEmailsByDomain();
      }
    }

    function clearKeywords() {
      if (confirm('Are you sure you want to clear all keywords?')) {
        emailKeywords = [];
        localStorage.setItem('emailKeywords', JSON.stringify(emailKeywords));
        updateKeywordsDisplay();
        showNotification('All keywords cleared!');
        
        // If keyword filter is enabled, re-filter emails
        if (keywordFilterEnabled && currentEmails.length > 0) {
          filterEmailsByDomain();
        }
      }
    }

    function removeKeyword(index) {
      emailKeywords.splice(index, 1);
      localStorage.setItem('emailKeywords', JSON.stringify(emailKeywords));
      updateKeywordsDisplay();
      showNotification('Keyword removed!');
      
      // If keyword filter is enabled, re-filter emails
      if (keywordFilterEnabled && currentEmails.length > 0) {
        filterEmailsByDomain();
      }
    }

    function updateKeywordsDisplay() {
      const keywordsTags = document.getElementById('keywordsTags');
      keywordsTags.innerHTML = '';
      
      if (emailKeywords.length === 0) {
        keywordsTags.innerHTML = '<p style="color: var(--text-light); font-size: 0.9rem;">No keywords saved</p>';
        return;
      }
      
      emailKeywords.forEach((keyword, index) => {
        const tag = document.createElement('div');
        tag.className = 'keyword-tag';
        tag.innerHTML = `
          ${keyword}
          <button class="remove-tag" onclick="removeKeyword(${index})">
            <i class="fas fa-times"></i>
          </button>
        `;
        keywordsTags.appendChild(tag);
      });
    }

    // Domains Functions
    function saveDomains() {
      const domainsInput = document.getElementById('domainsInput').value;
      const domains = domainsInput
        .split('\n')
        .map(d => d.trim())
        .filter(d => d.length > 0);
      
      domainsToRemove = [...new Set([...domainsToRemove, ...domains])];
      localStorage.setItem('domainsToRemove', JSON.stringify(domainsToRemove));
      updateDomainsDisplay();
      showNotification('Domains saved successfully!');
      
      // If domain removal is enabled, re-filter emails
      if (domainRemovalEnabled && currentEmails.length > 0) {
        filterEmailsByDomain();
      }
    }

    function clearDomains() {
      if (confirm('Are you sure you want to clear all domains?')) {
        domainsToRemove = [];
        localStorage.setItem('domainsToRemove', JSON.stringify(domainsToRemove));
        updateDomainsDisplay();
        showNotification('All domains cleared!');
        
        // If domain removal is enabled, re-filter emails
        if (domainRemovalEnabled && currentEmails.length > 0) {
          filterEmailsByDomain();
        }
      }
    }

    function removeDomain(index) {
      domainsToRemove.splice(index, 1);
      localStorage.setItem('domainsToRemove', JSON.stringify(domainsToRemove));
      updateDomainsDisplay();
      showNotification('Domain removed!');
      
      // If domain removal is enabled, re-filter emails
      if (domainRemovalEnabled && currentEmails.length > 0) {
        filterEmailsByDomain();
      }
    }

    function updateDomainsDisplay() {
      const domainsTags = document.getElementById('domainsTags');
      domainsTags.innerHTML = '';
      
      if (domainsToRemove.length === 0) {
        domainsTags.innerHTML = '<p style="color: var(--text-light); font-size: 0.9rem;">No domains to remove</p>';
        return;
      }
      
      domainsToRemove.forEach((domain, index) => {
        const tag = document.createElement('div');
        tag.className = 'domain-tag';
        tag.innerHTML = `
          ${domain}
          <button class="remove-tag" onclick="removeDomain(${index})">
            <i class="fas fa-times"></i>
          </button>
        `;
        domainsTags.appendChild(tag);
      });
    }
  </script>
</body>
</html>